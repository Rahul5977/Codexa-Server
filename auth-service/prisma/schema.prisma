generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model Problem {
  id          String     @id
  title       String
  difficulty  Difficulty
  statement   String
  examples    Json[]
  constraints String[]
  tags        String[]
  hints       String[]
  companies   String[]
  testcases   Json[]
  createdAt   DateTime   @default(now())
  updatedAt   DateTime
}

model users {
  id               String        @id
  name             String
  email            String        @unique
  password         String
  role             Role          @default(USER)
  status           AccountStatus @default(ACTIVE)
  image_url        String?
  imageUrlPublicId String?
  bio              String?
  emailVerified    Boolean       @default(false)
  refreshToken     String?
  currentRating    Float         @default(0)
  totalSolved      Int           @default(0)
  easyCount        Int           @default(0)
  mediumCount      Int           @default(0)
  hardCount        Int           @default(0)
  githubUrl        String?
  linkedinUrl      String?
  lastLoginAt      DateTime?
  createdAt        DateTime      @default(now())
  updatedAt        DateTime

  @@index([email])
  @@index([role])
  @@index([status])
}

enum AccountStatus {
  ACTIVE
  INACTIVE
  SUSPENDED
  DELETED
}

enum Difficulty {
  EASY
  MEDIUM
  HARD
}

enum Role {
  USER
  STUDENT
  TEACHER
  ADMIN
}
